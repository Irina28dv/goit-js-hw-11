{"version":3,"file":"commonHelpers.js","sources":["../src/js/index.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst galleryContainer = document.querySelector('.gallery');\nconst searchForm = document.querySelector('.search-form');\nconst loaderContainer = document.querySelector('.loader');\nconst GALLERY_LINK = 'gallery-link';\n\nlet loadedPage = 1;\n\nconst showMoreButton = document.getElementById('load-more');\n\nshowMoreButton.addEventListener('click', function () {\n  loaderContainer.style.display = 'block';\n\n  fetchImages(searchForm.elements.query.value, loadedPage)\n    .then(function ({ hits }) {\n      if (Array.isArray(hits) && hits.length > 0) {\n        const galleryHTML = hits.map(createGallery).join('');\n        galleryContainer.innerHTML += galleryHTML;\n        loadedPage++;\n      } else {\n        toastError('No more images to load.');\n        showMoreButton.style.display = 'none';\n      }\n    })\n    .catch(function (error) {\n      toastError(`Error fetching images: ${error}`);\n    })\n    .finally(function () {\n      loaderContainer.style.display = 'none';\n    });\n});\n\nsearchForm.addEventListener('submit', function (event) {\n  event.preventDefault();\n  const queryInput = event.target.elements.query.value;\n\n  if (queryInput === '') {\n    return;\n  }\n\n  galleryContainer.innerHTML = '';\n  loaderContainer.style.display = 'block';\n\n  fetchImages(queryInput)\n    .then(function ({ hits, total }) {\n      if (Array.isArray(hits) && hits.length > 0) {\n        const galleryHTML = hits.map(createGallery).join('');\n        galleryContainer.innerHTML = galleryHTML;\n\n        toastSuccess(`Was found: ${total} images`);\n\n        const lightbox = new SimpleLightbox(`.${GALLERY_LINK}`);\n        lightbox.refresh();\n        showMoreButton.style.display = 'block';\n      } else {\n        toastError(\n          'Sorry, there are no images matching your search query. Please try again!'\n        );\n        showMoreButton.style.display = 'none';\n      }\n    })\n    .catch(function (error) {\n      toastError(`Error fetching images: ${error}`);\n    })\n    .finally(function () {\n      searchForm.reset();\n      loaderContainer.style.display = 'none';\n    });\n});\n\nconst toastOptions = {\n  titleColor: '#FFFFFF',\n  messageColor: '#FFFFFF',\n  messageSize: '16px',\n  position: 'topRight',\n  displayMode: 'replace',\n  closeOnEscape: true,\n  pauseOnHover: false,\n  maxWidth: 432,\n  messageSize: '16px',\n  messageLineHeight: '24px',\n};\n\nfunction toastError(message) {\n  iziToast.show({\n    message,\n    backgroundColor: '#EF4040',\n    progressBarColor: '#FFE0AC',\n    icon: 'icon-close',\n    ...toastOptions,\n  });\n}\n\nfunction toastSuccess(message) {\n  iziToast.show({\n    message,\n    backgroundColor: '#59A10D',\n    progressBarColor: '#B5EA7C',\n    icon: 'icon-chek',\n    ...toastOptions,\n  });\n}\n\nconst BASE_URL = 'https://pixabay.com/api/';\n\nfunction fetchImages(q, page) {\n  const searchParams = new URLSearchParams({\n    key: '42317586-b983a1ee46e38e925d954d84d',\n    q,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safeSearch: true,\n    per_page: 6,\n    page,\n  });\n\n  const PARAMS = `?${searchParams}`;\n  const url = BASE_URL + PARAMS;\n\n  return fetch(url)\n    .then(response => response.json())\n    .catch(error => {\n      toastError(`Error fetching images: ${error}`);\n      throw error;\n    });\n}\n\nfunction createGallery({\n  largeImageURL,\n  tags,\n  webformatURL,\n  likes,\n  views,\n  comments,\n  downloads,\n}) {\n  return `\n  <a href=\"${largeImageURL}\" class=\"${GALLERY_LINK}\">\n     <figure>\n      <img src=\"${webformatURL}\" alt=\"${tags}\" class=\"gallery-image\">\n      <figcaption class=\"gallery__figcaption\">\n        <div class=\"image-item\">Likes <span class=\"image-elem\">${likes}</span></div>\n        <div class=\"image-item\">Views <span class=\"image-elem\">${views}</span></div>\n        <div class=\"image-item\">Comments <span class=\"image-elem\">${comments}</span></div>\n        <div class=\"image-item\">Downloads <span class=\"image-elem\">${downloads}</span></div>\n      </figcaption>\n     </figure>\n  </a>\n`;\n}\n"],"names":["galleryContainer","searchForm","loaderContainer","GALLERY_LINK","loadedPage","showMoreButton","fetchImages","hits","galleryHTML","createGallery","toastError","error","event","queryInput","total","toastSuccess","SimpleLightbox","toastOptions","message","iziToast","BASE_URL","q","page","PARAMS","url","response","largeImageURL","tags","webformatURL","likes","views","comments","downloads"],"mappings":"6vBAMA,MAAMA,EAAmB,SAAS,cAAc,UAAU,EACpDC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAkB,SAAS,cAAc,SAAS,EAClDC,EAAe,eAErB,IAAIC,EAAa,EAEjB,MAAMC,EAAiB,SAAS,eAAe,WAAW,EAE1DA,EAAe,iBAAiB,QAAS,UAAY,CACnDH,EAAgB,MAAM,QAAU,QAEhCI,EAAYL,EAAW,SAAS,MAAM,MAAOG,CAAU,EACpD,KAAK,SAAU,CAAE,KAAAG,GAAQ,CACxB,GAAI,MAAM,QAAQA,CAAI,GAAKA,EAAK,OAAS,EAAG,CAC1C,MAAMC,EAAcD,EAAK,IAAIE,CAAa,EAAE,KAAK,EAAE,EACnDT,EAAiB,WAAaQ,EAC9BJ,GACR,MACQM,EAAW,yBAAyB,EACpCL,EAAe,MAAM,QAAU,MAEvC,CAAK,EACA,MAAM,SAAUM,EAAO,CACtBD,EAAW,0BAA0BC,CAAK,EAAE,CAClD,CAAK,EACA,QAAQ,UAAY,CACnBT,EAAgB,MAAM,QAAU,MACtC,CAAK,CACL,CAAC,EAEDD,EAAW,iBAAiB,SAAU,SAAUW,EAAO,CACrDA,EAAM,eAAc,EACpB,MAAMC,EAAaD,EAAM,OAAO,SAAS,MAAM,MAE3CC,IAAe,KAInBb,EAAiB,UAAY,GAC7BE,EAAgB,MAAM,QAAU,QAEhCI,EAAYO,CAAU,EACnB,KAAK,SAAU,CAAE,KAAAN,EAAM,MAAAO,GAAS,CAC/B,GAAI,MAAM,QAAQP,CAAI,GAAKA,EAAK,OAAS,EAAG,CAC1C,MAAMC,EAAcD,EAAK,IAAIE,CAAa,EAAE,KAAK,EAAE,EACnDT,EAAiB,UAAYQ,EAE7BO,EAAa,cAAcD,CAAK,SAAS,EAExB,IAAIE,EAAe,IAAIb,CAAY,EAAE,EAC7C,QAAO,EAChBE,EAAe,MAAM,QAAU,OACvC,MACQK,EACE,0EACV,EACQL,EAAe,MAAM,QAAU,MAEvC,CAAK,EACA,MAAM,SAAUM,EAAO,CACtBD,EAAW,0BAA0BC,CAAK,EAAE,CAClD,CAAK,EACA,QAAQ,UAAY,CACnBV,EAAW,MAAK,EAChBC,EAAgB,MAAM,QAAU,MACtC,CAAK,EACL,CAAC,EAED,MAAMe,EAAe,CACnB,WAAY,UACZ,aAAc,UACd,YAAa,OACb,SAAU,WACV,YAAa,UACb,cAAe,GACf,aAAc,GACd,SAAU,IACV,YAAa,OACb,kBAAmB,MACrB,EAEA,SAASP,EAAWQ,EAAS,CAC3BC,EAAS,KAAK,CACZ,QAAAD,EACA,gBAAiB,UACjB,iBAAkB,UAClB,KAAM,aACN,GAAGD,CACP,CAAG,CACH,CAEA,SAASF,EAAaG,EAAS,CAC7BC,EAAS,KAAK,CACZ,QAAAD,EACA,gBAAiB,UACjB,iBAAkB,UAClB,KAAM,YACN,GAAGD,CACP,CAAG,CACH,CAEA,MAAMG,EAAW,2BAEjB,SAASd,EAAYe,EAAGC,EAAM,CAW5B,MAAMC,EAAS,IAVM,IAAI,gBAAgB,CACvC,IAAK,qCACL,EAAAF,EACA,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,EACV,KAAAC,CACJ,CAAG,CAE8B,GACzBE,EAAMJ,EAAWG,EAEvB,OAAO,MAAMC,CAAG,EACb,KAAKC,GAAYA,EAAS,MAAM,EAChC,MAAMd,GAAS,CACd,MAAAD,EAAW,0BAA0BC,CAAK,EAAE,EACtCA,CACZ,CAAK,CACL,CAEA,SAASF,EAAc,CACrB,cAAAiB,EACA,KAAAC,EACA,aAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACF,EAAG,CACD,MAAO;AAAA,aACIN,CAAa,YAAYvB,CAAY;AAAA;AAAA,kBAEhCyB,CAAY,UAAUD,CAAI;AAAA;AAAA,iEAEqBE,CAAK;AAAA,iEACLC,CAAK;AAAA,oEACFC,CAAQ;AAAA,qEACPC,CAAS;AAAA;AAAA;AAAA;AAAA,CAK9E"}